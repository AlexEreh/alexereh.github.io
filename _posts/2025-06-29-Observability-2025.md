---
title: Современный Observability
date: 2025-06-29 19:00:00 +0300
categories: [Kubernetes, Observability]
tags: [kubernetes, observability, ebpf, coroot, kibana, grafana, prometheus, elasticsearch, logstash, fluentd, fluent-bit]
description: Observability - это подход к мониторингу и управлению приложениями, который позволяет получать полную картину состояния системы и быстро реагировать на изменения.
---

## Основные понятия Observability

### Метрики

Метрики - это числовые значения, которые описывают состояние системы. Они могут быть использованы для мониторинга и управления приложениями.

### Логи

Логи - это структурированные текстовые сообщения, которые содержат информацию о происходящих в работе системы событиях разной степени важности. Они могут быть использованы для отслеживания ошибок и проблем.

### Трассировка

Трассировка - это технология, которая позволяет отслеживать запросы (прежде всего между несколькими сервисами) и их обработку в системе. Она может быть использована для того чтобы выявлять проблемы в межсервисных взаимодействиях. Представьте: один запрос подразумевает вызов нескольких других сервисов. А теперь представьте что будет если один из сервисов не отвечает или отвечает слишком долго, или отвечает с ошибкой. Трассировка может помочь вам найти проблему и решить ее.

### Алерты

Алерты - это уведомления о проблемах в системе. Они могут быть использованы для мониторинга и управления приложениями. Представьте: вы на ***продуктовом*** проекте, где между пользователями системы и SRE (либо в худшем случае разработчиками) есть несколько должностей сотрудников, и пока проблема дойдёт до того, кто должен её устранять пользователи злостно начнут удалять аккаунты или **отказываться от использования системы**. Действительно ужасная ситуация.

### Мониторинг
Мониторинг - это процесс наблюдения за состоянием системы и ее компонентов. Он может быть использован для мониторинга и управления приложениями.

## Стек Observability на момент 2020 года

### Kibana



### Logstash
### Elasticsearch
### Prometheus

Prometheus - это система сбора и хранения метрик, которая позволяет хранить и делать выборку хранимых метрик в системе. Всего типов метрик: счетчики (counter, gauge), гистограммы (histogram), и суммы (summary).

### AlertManager



### Grafana



### Jaeger

### Grafana OnCall



## Стек Observability на текущий момент

### coroot

![coroot-profiling](https://coroot.com/img/logo.svg)
_Пример профиля сервиса без дополнительной инструментации_

coroot - это набор инструментов для мониторинга и управления приложениями. В целом он предоставляет те же функции, что и Prometheus + Grafana, но с более широким набором инструментов и возможностей.

Особенно стоит отметить, что coroot предоставляет инструментарий для непрерывного профилирования приложений, используя технологию eBPF. Теперь не обязательно как по старинке выполнять команды pprof для получения профилей CPU/RAM, предварительно прокинув порты, достаточно просто зайти в coroot и найти приложение - там же и будет отображен flamegraph по времени выполнения определённых функций.

### eBPF и XDP

